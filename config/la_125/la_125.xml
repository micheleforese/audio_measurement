<proc name="LA-125">

  <steps>
    <serial_number>
      <text>ID Device:</text>
    </serial_number>

    <default>
      <sweep>
        <config>
          <nidaq>
            <Fs_max>1000000</Fs_max>
            <voltage_min>-10</voltage_min>
            <voltage_max>10</voltage_max>
            <input_channel>cDAQ9189-1CDBE0AMod5/ai0</input_channel>
          </nidaq>
          <sampling>
            <Fs_multiplier>50</Fs_multiplier>
            <points_per_decade>20</points_per_decade>
            <frequency_min>5</frequency_min>
            <frequency_max>99999</frequency_max>
            <number_of_samples>100</number_of_samples>
            <delay_measurements>0</delay_measurements>
          </sampling>
          <plot>
            <interpolation_rate>10</interpolation_rate>
          </plot>
        </config>
      </sweep>
    </default>

    <file>
      <key>master</key>
      <path>master.calibration.dat</path>
    </file>
    <file>
      <key>master_plot</key>
      <path>master_plot.calibration.png</path>
    </file>

    <task text="CALIBRATION DEVICE">
      <check condition="not exists" action="break">
        <file key="master" />
      </check>

      <set_level>
        <file_set_level key="master" />
        <file_set_level_plot key="master_plot" />
        <config>
          <nidaq>
            <Fs_max>1000000</Fs_max>
            <voltage_min>-10</voltage_min>
            <voltage_max>10</voltage_max>
            <input_channel>cDAQ9189-1CDBE0AMod5/ai0</input_channel>
          </nidaq>
          <sampling>
            <Fs_multiplier>50</Fs_multiplier>
            <number_of_samples>200</number_of_samples>
          </sampling>
        </config>
      </set_level>
    </task>

    <task text="BASE SET DEVICE">
      <text>Collegare L'Output al DUT.</text>
      <ask>Ready?</ask>
    </task>


    <task text="GAIN 0">
      <check condition="not exists" action="break">
        <file path="sweep PRE G0/sweep PRE G0.csv" />
      </check>


      <text>GAIN 0.</text>
      <ask>Ready?</ask>

      <file>
        <key>set_level_0</key>
        <path>set_level_0.set_level.dat</path>
      </file>
      <file>
        <key>set_level_0_plot</key>
        <path>set_level_0_plot.set_level.png</path>
      </file>
      <file>
        <key>gain_0</key>
        <path>gain_0.dat</path>
      </file>

      <set_level>
        <file_set_level key="set_level_0" />
        <file_set_level_plot key="set_level_0_plot" />
        <config>
          <nidaq>
            <Fs_max>1000000</Fs_max>
            <voltage_min>-10</voltage_min>
            <voltage_max>10</voltage_max>
            <input_channel>cDAQ9189-1CDBE0AMod5/ai0</input_channel>
          </nidaq>
          <sampling>
            <Fs_multiplier>50</Fs_multiplier>
            <number_of_samples>200</number_of_samples>
          </sampling>
        </config>
      </set_level>


      <insertion_gain>
        <file_calibration key="master" />
        <file_set_level key="set_level_0" />
        <file_gain key="gain_0" />
      </insertion_gain>

      <sweep>
        <name_folder>sweep PRE G0</name_folder>
        <file_set_level key="set_level_0" />
        <file_offset key="set_level_0" />
        <file_insertion_gain key="gain_0" />
        <config>
          <plot>
            <color>#ff0000</color>
            <legend>PRE G0</legend>
          </plot>
        </config>
      </sweep>

    </task>

    <task text="GAIN 3">
      <check condition="not exists" action="break">
        <file path="sweep PRE G3/sweep PRE G3.csv" />
      </check>

      <text>GAIN 3.</text>
      <ask>Ready?</ask>

      <file>
        <key>set_level_3</key>
        <path>set_level_3.set_level.dat</path>
      </file>
      <file>
        <key>set_level_3_plot</key>
        <path>set_level_3_plot.set_level.png</path>
      </file>
      <file>
        <key>gain_3</key>
        <path>gain_3.dat</path>
      </file>

      <set_level>
        <file_set_level key="set_level_3" />
        <file_set_level_plot key="set_level_3_plot" />
        <config>
          <nidaq>
            <Fs_max>1000000</Fs_max>
            <voltage_min>-10</voltage_min>
            <voltage_max>10</voltage_max>
            <input_channel>cDAQ9189-1CDBE0AMod5/ai0</input_channel>
          </nidaq>
          <sampling>
            <Fs_multiplier>50</Fs_multiplier>
            <number_of_samples>200</number_of_samples>
          </sampling>
        </config>
      </set_level>


      <insertion_gain>
        <file_calibration key="master" />
        <file_set_level key="set_level_3" />
        <file_gain key="gain_3" />
      </insertion_gain>

      <sweep>
        <name_folder>sweep PRE G3</name_folder>
        <file_set_level key="set_level_3" />
        <file_offset key="set_level_3" />
        <file_insertion_gain key="gain_3" />
        <config>
          <plot>
            <color>#00ff00</color>
            <legend>PRE G3</legend>
          </plot>
        </config>
      </sweep>

    </task>

    <task text="GAIN 6">
      <check condition="not exists" action="break">
        <file path="sweep PRE G6/sweep PRE G6.csv" />
      </check>

      <text>GAIN 6.</text>
      <ask>Ready?</ask>

      <file>
        <key>set_level_6</key>
        <path>set_level_6.set_level.dat</path>
      </file>
      <file>
        <key>set_level_6_plot</key>
        <path>set_level_6_plot.set_level.png</path>
      </file>
      <file>
        <key>gain_6</key>
        <path>gain_6.dat</path>
      </file>

      <set_level>
        <file_set_level key="set_level_6" />
        <file_set_level_plot key="set_level_6_plot" />
        <config>
          <nidaq>
            <Fs_max>1000000</Fs_max>
            <voltage_min>-10</voltage_min>
            <voltage_max>10</voltage_max>
            <input_channel>cDAQ9189-1CDBE0AMod5/ai0</input_channel>
          </nidaq>
          <sampling>
            <Fs_multiplier>50</Fs_multiplier>
            <number_of_samples>200</number_of_samples>
          </sampling>
        </config>
      </set_level>


      <insertion_gain>
        <file_calibration key="master" />
        <file_set_level key="set_level_6" />
        <file_gain key="gain_6" />
      </insertion_gain>

      <sweep>
        <name_folder>sweep PRE G6</name_folder>
        <file_set_level key="set_level_6" />
        <file_offset key="set_level_6" />
        <file_insertion_gain key="gain_6" />
        <config>
          <plot>
            <color>#0000ff</color>
            <legend>PRE G6</legend>
          </plot>
        </config>
      </sweep>

    </task>

  </steps>
</proc>